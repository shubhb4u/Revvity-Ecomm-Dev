/*
 * Test class for FS_SignatureController
 * 2025-03-27  Kaustav Chanda(SFS IT Team) created for JIRA SFS-4, Service Report
*/
@isTest(SeeAllData = false)
public class FS_SignatureControllerTest {
    @isTest
    static void testSaveSignatureWithRoleValidCustomer() {
        //Create a location
        Schema.Location location = new Schema.Location(Name = 'Test Location', LocationType = 'Building');
        insert location;
        
        // Create a sample WorkOrder
        WorkOrder workOrderData = new WorkOrder(
            Description = 'Test Work Order',
            Subject = 'Test Subject',
            Record_Type__c = 'Field Service',
            LocationId = location.id
        );
        insert workOrderData;
        // Test data
        Id recordId = workOrderData.Id;
        String fieldName = 'Customer__c';
        String signatureData = 'data:image/png;base64,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';
        String name = null;
        String email = 'johndoe@example.com';
        String custName = 'Jane Customer';
        String techName = null;
        
        // Call the method
        Test.startTest();
        String result = FS_SignatureController.saveSignatureWithRole(
            recordId, fieldName, signatureData, name, email, custName, techName
        );
        Test.stopTest();
        
        // Verify the result
        WorkOrder updatedWorkOrder = [SELECT Customer__c, Logged_In_Customer_Name__c, Logged_In_Customer_Email__c FROM WorkOrder WHERE Id = :recordId];
        System.assertNotEquals(null, updatedWorkOrder.Customer__c);
        System.assertEquals(custName, updatedWorkOrder.Logged_In_Customer_Name__c);
        System.assertEquals(email, updatedWorkOrder.Logged_In_Customer_Email__c);
    }
    
    @isTest
    static void testSignatureWithCustomerNameChanged(){
        //Create a location
        Schema.Location location = new Schema.Location(Name = 'Test Location', LocationType = 'Building');
        insert location;
        // Create a sample WorkOrder
        WorkOrder workOrderData = new WorkOrder(
            Description = 'Test Work Order',
            Subject = 'Test Subject',
            Record_Type__c = 'Field Service',
            LocationId = location.id
        );
        insert workOrderData;
        // Test data
        Id recordId = workOrderData.Id;
        String fieldName = 'Customer__c';
        String signatureData = 'data:image/png;base64,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';
        String name = 'Jane Customer';
        String email = 'johndoe@example.com';
        String custName = null;
        String techName = null;
        
        // Call the method
        Test.startTest();
        String result = FS_SignatureController.saveSignatureWithRole(
            recordId, fieldName, signatureData, name, email, custName, techName
        );
        Test.stopTest();
        
        // Verify the result
        WorkOrder updatedWorkOrder = [SELECT Customer__c, Logged_In_Customer_Name__c, Logged_In_Customer_Email__c FROM WorkOrder WHERE Id = :recordId];
        System.assertNotEquals(null, updatedWorkOrder.Customer__c);
        System.assertEquals(name, updatedWorkOrder.Logged_In_Customer_Name__c);
        System.assertEquals(email, updatedWorkOrder.Logged_In_Customer_Email__c);
    }
    
    @isTest
    static void testSaveSignatureWithRoleValidTechnician() {
        //Create a location
        Schema.Location location = new Schema.Location(Name = 'Test Location', LocationType = 'Building');
        insert location;
        
        // Create a sample WorkOrder
        WorkOrder workOrderData = new WorkOrder(
            Description = 'Test Work Order',
            Subject = 'Test Subject',
            Record_Type__c = 'Field Service',
            LocationId = location.id
        );
        insert workOrderData;
        // Test data
        Id recordId = workOrderData.Id;
        String fieldName = 'Technician__c';
        String signatureData = 'data:image/png;base64,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';
        String name = null;
        String email = 'johndoe@example.com';
        String custName = null;
        String techName = 'Jane Technician';
        
        // Call the method
        Test.startTest();
        String result = FS_SignatureController.saveSignatureWithRole(
            recordId, fieldName, signatureData, name, email, custName, techName
        );
        Test.stopTest();
        
        // Verify the result
        WorkOrder updatedWorkOrder = [SELECT Technician__c, Logged_In_Technician_Name__c, Logged_In_Technician_Email__c FROM WorkOrder WHERE Id = :recordId];
        System.assertNotEquals(null, updatedWorkOrder.Technician__c);
        System.assertEquals(techName, updatedWorkOrder.Logged_In_Technician_Name__c);
        System.assertEquals(email, updatedWorkOrder.Logged_In_Technician_Email__c);
    }
    
    @isTest
    static void testSignatureWithTechnicianNameChanged(){
        //Create a location
        Schema.Location location = new Schema.Location(Name = 'Test Location', LocationType = 'Building');
        insert location;
        
        // Create a sample WorkOrder
        WorkOrder workOrderData = new WorkOrder(
            Description = 'Test Work Order',
            Subject = 'Test Subject',
            Record_Type__c = 'Field Service',
            LocationId = location.id
        );
        insert workOrderData;
        // Test data
        Id recordId = workOrderData.Id;
        String fieldName = 'Technician__c';
        String signatureData = 'data:image/png;base64,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';
        String name = 'Jane Technician';
        String email = 'johndoe@example.com';
        String custName = null;
        String techName = null;
        
        // Call the method
        Test.startTest();
        String result = FS_SignatureController.saveSignatureWithRole(
            recordId, fieldName, signatureData, name, email, custName, techName
        );
        Test.stopTest();
        
        // Verify the result
        WorkOrder updatedWorkOrder = [SELECT Technician__c, Logged_In_Technician_Name__c, Logged_In_Technician_Email__c FROM WorkOrder WHERE Id = :recordId];
        System.assertNotEquals(null, updatedWorkOrder.Technician__c);
        System.assertEquals(name, updatedWorkOrder.Logged_In_Technician_Name__c);
        System.assertEquals(email, updatedWorkOrder.Logged_In_Technician_Email__c);
    }
    @isTest
    static void testSaveSignatureWithRoleMissingSignatureData() {
        //Create a location
        Schema.Location location = new Schema.Location(Name = 'Test Location', LocationType = 'Building');
        insert location;
        
        // Create a sample WorkOrder
        WorkOrder workOrderData = new WorkOrder(
            Description = 'Test Work Order',
            Subject = 'Test Subject',
            Record_Type__c = 'Field Service',
            LocationId = location.id
        );
        insert workOrderData;
        // Test data
        Id recordId = workOrderData.Id;
        try{
        Test.startTest();
        FS_SignatureController.saveSignatureWithRole(
            recordId, 'Customer__c', '', 'John Doe', 'johndoe@example.com', null, null
        );
        Test.stopTest();
        }Catch(AuraHandledException e){
        System.assertEquals('Script-thrown exception', e.getMessage());
        }
    }
    @isTest
    static void testSaveSignatureWithInvalidWorkOrderData() {
        Id recordId;
        String signatureData = 'data:image/png;base64,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';
        try{
        Test.startTest();
        FS_SignatureController.saveSignatureWithRole(
            recordId, 'Customer__c', signatureData, 'John Doe', 'johndoe@example.com', null, null
        );
        Test.stopTest();
        }Catch(AuraHandledException e){
        System.assertEquals('Script-thrown exception', e.getMessage());
        }
    }
}