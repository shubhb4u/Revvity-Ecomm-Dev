<template>
    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open" aria-labelledby="modal-heading-01"
        aria-describedby="modal-content-id-1">
        <div class="slds-modal__container">
            <header class="slds-modal__header">
                <button class="slds-button slds-button_icon slds-modal__close" title="Close"
                        onclick={handleClose}>
<lightning-icon icon-name="utility:close" size="small" alternative-text="Close"></lightning-icon>
</button>
            </header>

            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                <div class="slds-form-element">
                    <!--<label class="slds-form-element__label" for="quote-search-input">Quote Number</label>-->
                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left">
                        <lightning-icon icon-name="utility:search" variant="bare"
                            class="slds-input__icon slds-input__icon_left"></lightning-icon>
                        <input type="search" id="quote-search-input" class="slds-input"
                               placeholder="Search quote number"
                               value={searchTerm}
                               oninput={handleInputChange}
                               autofocus />
                    </div>
                </div>

                <template if:true={hasResults}>
                    <ul class="slds-listbox slds-listbox_vertical slds-m-top_medium" role="listbox">
                        <template for:each={filteredQuotes} for:item="quote">
                            <li key={quote.Id} class="slds-listbox-item" role="option">
                                <div class="slds-media slds-media_small slds-is-hoverable slds-p-around_x-small"
                                    data-quote-id={quote.Id} onclick={handleSelectQuote}>
                                    <div class="slds-media__figure">
                                        <lightning-icon icon-name="standard:quote" size="small"></lightning-icon>
                                    </div>
                                    <div class="slds-media__body">
                                        <p class="slds-text-link_reset">
                                            <strong>{quote.Name}</strong>
                                        </p>
                                    </div>
                                </div>
                            </li>
                        </template>
                    </ul>
                </template>

                <template if:true={showNoResults}>
                    <div class="slds-text-align_center slds-p-around_medium slds-text-color_weak">
                        No matching quotes found for "{searchTerm}"
                    </div>
                </template>
            </div>

            <footer class="slds-modal__footer">
                <button class="slds-button slds-button_neutral" onclick={handleClose}>Cancel</button>
            </footer>
        </div>
    </section>

    <div class="slds-backdrop slds-backdrop_open"></div>
</template>